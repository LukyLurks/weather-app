(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),c=a.n(s),u=a(1),o=a.n(u),i=a(13),l=a(16),p=a(6),h=a(9),m=a(10),d=a(5),f=a(4),y=a(11);a(23),a(24),a(25);function b(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("label",null,r.a.createElement("input",{id:"searchField",type:"text",onChange:e.onChange,value:e.value,required:!0,placeholder:"City or State",autoFocus:!0})),r.a.createElement("button",{type:"submit"},r.a.createElement("span",{role:"img","aria-label":"magnifying glass emoji"},"\ud83d\udd0d")," Search"))}function v(e){return e.state.data?r.a.createElement(k,{data:e.state.data,countries:e.countries}):r.a.createElement(g,{error:e.state.error,data:e.state.data})}function g(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.error?e.error.message:""),r.a.createElement("p",null,"You can specify a country/state after a comma, for example:"),r.a.createElement("ul",null,r.a.createElement("li",null,'"paris, texas" (or "paris, tx")'),r.a.createElement("li",null,'"melbourne, australia" (or "melbourne, au")')));return r.a.createElement("div",{className:"WeatherResults"},t)}var k=function(e){Object(f.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={countryName:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getCountryName()}},{key:"componentDidUpdate",value:function(e){e.data.sys.country!==this.props.data.sys.country&&this.getCountryName()}},{key:"getCelsius",value:function(){return"".concat(Math.round(this.props.data.main.temp-273.15),"\xb0C")}},{key:"getFahrenheit",value:function(){return"".concat(Math.round(1.8*this.props.data.main.temp-459.67),"\xb0F")}},{key:"getCountryName",value:function(){var e=Object(p.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.data){e.next=2;break}return e.abrupt("return");case 2:return t=this.props.data.sys.country,e.next=5,this.props.countries;case 5:a=e.sent,n=a.find((function(e){return e.code===t})).name,this.setState({countryName:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIconPath",value:function(){var e=this.props.data.weather[0].icon;return"http://openweathermap.org/img/wn/".concat(e,".png")}},{key:"render",value:function(){return r.a.createElement("div",{className:"WeatherResults"},r.a.createElement("h2",null,this.props.data.name,", ",this.state.countryName),r.a.createElement("img",{id:"weather-icon",src:this.getIconPath(),alt:this.props.data.weather[0].description}),r.a.createElement("ul",null,r.a.createElement("li",null,this.props.data.weather[0].description),r.a.createElement("li",null,this.getCelsius()," / ",this.getFahrenheit())))}}]),a}(r.a.Component),E=function(e){return r.a.createElement("div",{className:"FormAndResults"},r.a.createElement("h1",null,"OpenWeatherApp"),r.a.createElement(b,{onSubmit:e.handleQuerySubmit,onChange:e.handleQueryChange,value:e.state.query}),r.a.createElement(v,{state:e.state,countries:e.countries}),r.a.createElement("footer",null,"Powered by ",r.a.createElement("a",{href:"https://openweathermap.org"},"OpenWeather")))},x=function(e){Object(f.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={query:"",data:null,error:null},n.handleQueryChange=n.handleQueryChange.bind(Object(d.a)(n)),n.preprocessQuery=n.preprocessQuery.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.countries=fetch("countries.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})),this.usStates=fetch("usstates.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}))}},{key:"handleQueryChange",value:function(e){var t=e.target;this.setState({query:t.value})}},{key:"preprocessQuery",value:function(){var e=Object(p.a)(o.a.mark((function e(t){var a,n,r,s,c,u,p,h,m,d,f,y,b,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.query.trim(),!(n=Object(l.a)(/(,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]?([0-9A-Z_a-z]{2,}))$/i,{place:2})).test(a)){e.next=56;break}return r=a.match(n)[2].toLowerCase(),e.prev=5,e.next=8,this.countries;case 8:s=e.sent,c=Object(i.a)(s),e.prev=10,c.s();case 12:if((u=c.n()).done){e.next=19;break}if(p=u.value,r!==p.name.toLowerCase()){e.next=17;break}return h=a.replace(r,p.code),e.abrupt("return",this.sendQuery(h));case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return e.next=29,this.usStates;case 29:m=e.sent,d=Object(i.a)(m),e.prev=31,d.s();case 33:if((f=d.n()).done){e.next=43;break}if(y=f.value,r!==y.name.toLowerCase()){e.next=38;break}return b=a.replace(r,y.code)+", us",e.abrupt("return",this.sendQuery(b));case 38:if(r!==y.code.toLowerCase()){e.next=41;break}return v=a+", us",e.abrupt("return",this.sendQuery(v));case 41:e.next=33;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(31),d.e(e.t1);case 48:return e.prev=48,d.f(),e.finish(48);case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(5),console.log(e.t2);case 56:return e.abrupt("return",this.sendQuery(a));case 57:case"end":return e.stop()}}),e,this,[[5,53],[10,21,24,27],[31,45,48,51]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendQuery",value:function(){var e=Object(p.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"f90f55ac16dce1d2e99f1bc07cc2c077",e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("f90f55ac16dce1d2e99f1bc07cc2c077"));case 3:if(a=e.sent,e.prev=4,a.ok){e.next=7;break}throw Error(a.statusText);case 7:return e.next=9,a.json();case 9:n=e.sent,this.setState({data:n,error:null}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),this.setState({error:e.t0,data:null});case 16:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMainWeather",value:function(){return this.state.data?/7\d\d/.test("".concat(this.state.data.weather[0].id))?"Obscured":this.state.data.weather[0].main:"Clear"}},{key:"render",value:function(){return r.a.createElement("div",{className:"WeatherApp ".concat(this.getMainWeather())},r.a.createElement(E,{handleQueryChange:this.handleQueryChange,handleQuerySubmit:this.preprocessQuery,state:this.state,countries:this.countries}))}}]),a}(r.a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.71a03ccf.chunk.js.map